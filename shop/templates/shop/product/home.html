{% extends "shop/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}
{% if category %}
{{ category.name }}
{% else %}
{% trans "Products" %}
{% endif %}
{% endblock %}

{% block content %}

<!-- Carousel Start -->
<div id="exceptionDivCarousel" class="container-fluid mb-3">
  <div class="row px-xl-5">
    <!-- Left -->
    <div id="exceptionDivCarousel" class="col-lg-8">
      <div id="header-carousel" class="carousel slide carousel-fade mb-30 mb-lg-0" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#header-carousel" data-slide-to="0" class="active"></li>
          <li data-target="#header-carousel" data-slide-to="1"></li>
          <li data-target="#header-carousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <!-- first slide -->
          <div class="carousel-item position-relative active" style="height: 430px">
            <img class="position-absolute w-100 h-100" src="{% static 'assets/img/carousel-1.jpg' %}"
              style="object-fit: cover" />
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
              <div class="p-3" style="max-width: 700px">
                <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">
                  {% trans "Men Fashion" %}
                </h1>
                <p class="mx-md-5 px-5 animate__animated animate__bounceIn">
                  {% trans "Discover a Fusion of Style and Comfort in Every Spin" %}
                </p>
                <div id="exceptionDivShopNow">
                  <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp"
                    href="{% url 'shop:show_categories' category_slug='man' %}">{% trans "Shop Now" %}</a>
                </div>
              </div>
            </div>
          </div>
          <!-- second slide -->
          <div class="carousel-item position-relative" style="height: 430px">
            <img class="position-absolute w-100 h-100" src="{% static 'assets/img/carousel-2.jpg' %}"
              style="object-fit: cover" />
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
              <div class="p-3" style="max-width: 700px">
                <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">
                  {% trans "Women Fashion" %}
                </h1>
                <p class="mx-md-5 px-5 animate__animated animate__bounceIn">
                  {% trans "Discover a Fusion of Style and Comfort in Every Spin" %}
                </p>
                <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp"
                  href="{% url 'shop:show_categories' category_slug='woman' %}">{% trans "Shop Now" %}</a>
              </div>
            </div>
          </div>
          <!-- third slide -->
          <div class="carousel-item position-relative" style="height: 430px">
            <img class="position-absolute w-100 h-100" src="{% static 'assets/img/carousel-3.jpg' %}"
              style="object-fit: cover" />
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
              <div class="p-3" style="max-width: 700px">
                <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">
                  {% trans "Kids Fashion" %}
                </h1>
                <p class="mx-md-5 px-5 animate__animated animate__bounceIn">
                  {% trans "Discover a Fusion of Style and Comfort in Every Spin" %}
                </p>
                <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp"
                  href="{% url 'shop:show_categories' category_slug='kids-baby' %}">{% trans "Shop Now" %}</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Right -->
    <div class="col-lg-4">
      <div class="product-offer mb-30" style="height: 200px">
        <img class="img-fluid" src="{% static 'assets/img/offer-1.jpg' %}" alt="" />
        <div class="offer-text">
          <h6 class="text-white text-uppercase">{% trans "Save 20%" %}</h6>
          <h3 class="text-white mb-3">{% trans "Special Offer" %}</h3>
          <a href="{% url 'shop:show_categories' category_slug='woman' %}" class="btn btn-primary">
            {% trans "Shop Now" %}
          </a>
        </div>
      </div>
      <div class="product-offer mb-30" style="height: 200px">
        <img class="img-fluid" src="{% static 'assets/img/offer-2.jpg' %}" alt="" />
        <div class="offer-text">
          <h6 class="text-white text-uppercase">{% trans "Save 20%" %}</h6>
          <h3 class="text-white mb-3">{% trans "Special Offer" %}</h3>
          <a href="{% url 'shop:show_categories' category_slug='woman' %}" class="btn btn-primary">
            {% trans "Shop Now" %}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Carousel End -->


<!-- Categories Start -->
<style>
  /* برای نمایشگرهای بزرگ (Desktop) */
  @media (min-width: 992px) {

    .content-section {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 50px;
    }

    .content-section .column {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .content-section .image-container {
      width: 20vw;
      /* استفاده از واحد نسبی برای عرض */
      height: 20vw;
      /* استفاده از واحد نسبی برای ارتفاع */
      border-radius: 50%;
      overflow: hidden;
      border: 5px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .content-section .circle-image {
      width: 100%;
      height: auto;
      border-radius: 60%;
    }

    .content-section p {
      margin-top: 10px;
    }
  }

  /* برای نمایشگرهای کوچک (Mobile) */
  @media (max-width: 991px) {
    .content-section {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      /* تغییر تعداد ستون‌ها به دو ستون */
      gap: 20px;
      margin-top: 50px;
    }

    .content-section .column {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .content-section .image-container {
      width: 40vw;
      /* استفاده از واحد نسبی برای عرض */
      height: 40vw;
      /* استفاده از واحد نسبی برای ارتفاع */
      border-radius: 50%;
      overflow: hidden;
      border: 5px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .content-section .circle-image {
      width: 100%;
      height: auto;
      border-radius: 60%;
    }

    .content-section p {
      margin-top: 10px;
    }

  }
</style>

<div class="container-fluid pt-5 pb-3">
  <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
    <span class="bg-secondary pr-3">{% trans "Categories" %}</span>
  </h2>

  <div class="content-section">
    {% for category in categories_8 %}
    <div class="column">
      <div class="image-container">
        <a href="{% url 'shop:show_categories' category_slug=category.slug %}">
          <img src="{% static 'img/' %}{{ category.slug }}.jpg" alt="{% trans 'Your Image' %}" class="circle-image">
        </a>
      </div>
      <p>{% trans category.name %}</p>
    </div>
    {% endfor %}
  </div>
</div>
<!-- Categories End -->

<!-- Featured Start -->
<div class="container-fluid pt-5">
  <div class="row px-xl-5 pb-3">
    <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
      <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px">
        <h1 class="fa fa-check text-primary m-0 mr-3"></h1>
        <h5 class="font-weight-semi-bold m-0">{% trans "Quality Product" %}</h5>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
      <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px">
        <h1 class="fa fa-shipping-fast text-primary m-0 mr-2"></h1>
        <h5 class="font-weight-semi-bold m-0">{% trans "Free Shipping" %}</h5>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
      <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px">
        <h1 class="fas fa-exchange-alt text-primary m-0 mr-3"></h1>
        <h5 class="font-weight-semi-bold m-0">{% trans "14-Day Return" %}</h5>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
      <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px">
        <h1 class="fa fa-phone-volume text-primary m-0 mr-3"></h1>
        <h5 class="font-weight-semi-bold m-0">{% trans "24/7 Support" %}</h5>
      </div>
    </div>
  </div>
</div>
<!-- Featured End -->


<!-- Cheapest Products Start -->
<div class="container-fluid pt-5 pb-3">
  <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
    <span class="bg-secondary pr-3">{% trans "Featured Products" %}</span>
  </h2>
  <div class="row px-xl-5">
    {% for product in cheapest_products %}
    <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
      <div class="product-item bg-light mb-4">
        <div class="product-img position-relative overflow-hidden" style="height: 300px;">
          {% if product.featured_images %}
          <img src="{{ product.featured_images.0.image.url }}"
            style="object-fit: contain; object-position: center; width: 100%; height: 100%;"
            alt="{% trans product.name %}" />
          {% else %}
          <img class="img-fluid w-100 " src="{% static 'img/no_image.png' %}" alt="{% trans product.name %}" />
          {% endif %}
          <div class="product-action">
            {% if user.is_authenticated %}
            {% if product.id not in user_wishlist_ids %}
            <a class="btn btn-outline-dark btn-square" href="{% url 'account:user_wishlist' product.id %}">
              <i class="far fa-heart"></i>
            </a>
            {% else %}
            <a class="btn btn-outline-dark btn-square"><i class="fas fa-heart"></i>
            </a>
            {% endif %}
            {% else %}
            <a class="btn btn-outline-dark btn-square" href="{% url 'account:user_wishlist' product.id %}">
              <i class="far fa-heart"></i>
            </a>
            {% endif %}
            <a class="btn btn-outline-dark btn-square"
              href="{% url 'shop:product_detail' id=product.id slug=product.slug %}"><i class="fa fa-search"></i></a>
          </div>
        </div>

        <div class="text-center py-4">
          <a class="h6 text-decoration-none text-truncate" href="">{% trans product.name|truncatechars:25 %}</a>
          <div class="d-flex align-items-center justify-content-center mt-2">
            <h5>${{ product.first_sale_price|floatformat:2 }}</h5>
            <h6 class="text-muted ml-2"><del>${{ product.first_retail_price|floatformat:2 }}</del></h6>
          </div>

          <!-- stars -->
          <div class="d-flex justify-content-center">
            {% if product.reviews.count > 0 %}
            <div class="text-primary mb-2">
              {% for i in "12345" %}
              {% if product.average_rating >= i|add:"0" %}
              <i class="fas fa-star"></i>
              {% else %}
              <i class="far fa-star"></i>
              {% endif %}
              {% endfor %}
            </div>
            <div style="margin-left: 5px;">
              <small>({{ product.reviews.count }})</small>
            </div>
            {% else %}
            <div class="text-primary mb-2">
              {% for i in "12345" %}
              <i class="far fa-star"></i>
              {% endfor %}
            </div>
            <div style="margin-left: 5px;">
              <small>(0)</small>
            </div>
            {% endif %}
          </div>
          <!-- end stars -->

        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
<!-- Products End -->

<!-- Offer Start -->
<div class="container-fluid pt-5 pb-3" id="exceptionDivOffer">
  <div class="row px-xl-5">
    <div class="col-md-6">
      <div class="product-offer mb-30" style="height: 300px">
        <img class="img-fluid" src="{% static 'assets/img/offer-1.jpg' %}" alt="" />
        <div class="offer-text">
          <h6 class="text-white text-uppercase">{% trans "Save 20%" %}</h6>
          <h3 class="text-white mb-3">{% trans "Special Offer" %}</h3>
          <a href="{% url 'shop:show_categories' category_slug='woman' %}"
            class="btn btn-primary">{% trans "Shop Now" %}</a>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="product-offer mb-30" style="height: 300px">
        <img class="img-fluid" src="{% static 'assets/img/offer-2.jpg' %}" alt="" />
        <div class="offer-text">
          <h6 class="text-white text-uppercase">{% trans "Save 20%" %}</h6>
          <h3 class="text-white mb-3">{% trans "Special Offer" %}</h3>
          <a href="{% url 'shop:show_categories' category_slug='woman' %}"
            class="btn btn-primary">{% trans "Shop Now" %}</a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Offer End -->

<!-- Recent Products Start -->
<div class="container-fluid pt-5 pb-3">
  <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
    <span class="bg-secondary pr-3">{% trans "Recent Products" %}</span>
  </h2>
  <div class="row px-xl-5">
    {% for product in latest_products %}
    <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
      <div class="product-item bg-light mb-4">
        <div class="product-img position-relative overflow-hidden" style="height: 300px;">

          {% if product.featured_images %}
          <img src="{{ product.featured_images.0.image.url }}"
            style="object-fit: contain; object-position: center; width: 100%; height: 100%;" alt="{{ product.name }}" />
          {% else %}
          <img class="img-fluid w-100 " src="{% static 'img/no_image.png' %}" alt="{{ product.name }}" />
          {% endif %}

          <!-- action -->
          <div class="product-action">
            {% if user.is_authenticated %}
            {% if product.id not in user_wishlist_ids %}
            <a class="btn btn-outline-dark btn-square" href="{% url 'account:user_wishlist' product.id %}">
              <i class="far fa-heart"></i>
            </a>
            {% else %}
            <a class="btn btn-outline-dark btn-square"><i class="fas fa-heart"></i>
            </a>
            {% endif %}
            {% else %}
            <a class="btn btn-outline-dark btn-square" href="{% url 'account:user_wishlist' product.id %}">
              <i class="far fa-heart"></i>
            </a>
            {% endif %}
            <a class="btn btn-outline-dark btn-square"
              href="{% url 'shop:product_detail' id=product.id slug=product.slug %}"><i class="fa fa-search"></i></a>
          </div>
        </div>

        <!-- name & price & stars -->
        <div class="text-center py-4">
          <a class="h6 text-decoration-none text-truncate" href="">{{ product.name|truncatechars:25 }}</a>
          <div class="d-flex align-items-center justify-content-center mt-2">
            <h5>${{ product.first_sale_price|floatformat:2 }}</h5>
            <h6 class="text-muted ml-2"><del>${{ product.first_retail_price|floatformat:2 }}</del></h6>
          </div>

          <div class="d-flex justify-content-center">
            {% if product.reviews.count > 0 %}
            {% for review in product.reviews.all %}
            <div class="text-primary mb-2">
              {% for i in "12345" %}
              {% if review.rating >= i|add:"0" %}
              <i class="fas fa-star"></i>
              {% else %}
              <i class="far fa-star"></i>
              {% endif %}
              {% endfor %}
            </div>
            {% endfor %}
            <div style="margin-left: 5px;">
              <small>({{ product.reviews.count }} {% trans "Reviews" %})</small>
            </div>
            {% else %}
            <div class="text-primary mb-2">
              {% for i in "12345" %}
              <i class="far fa-star"></i>
              {% endfor %}
            </div>
            <div style="margin-left: 5px;">
              <small>(0 {% trans "Reviews" %})</small>
            </div>
            {% endif %}
          </div>

        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
<!-- Products End -->

<!-- Vendor Start -->
<div class="container-fluid py-5">
  <div class="row px-xl-5">
    <div class="col">
      <div class="owl-carousel vendor-carousel">
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-1.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-2.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-3.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-4.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-5.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-6.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-7.jpg' %}" alt="" />
        </div>
        <div class="bg-light p-4">
          <img src="{% static 'assets/img/vendor-8.jpg' %}" alt="" />
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Vendor End -->


{% endblock %}