{% extends "admin/base_site.html" %}
{% load static %}
{% load i18n %}

{% block title %}
{% blocktrans %}Order {{ order.id }}{% endblocktrans %} {{ block.super }}
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <a href="{% url "admin:index" %}">{% trans "Home" %}</a> &rsaquo;
  <a href="{% url "admin:orders_order_changelist" %}">{% trans "Orders" %}</a>
  &rsaquo;
  <a href="{% url "admin:orders_order_change" order.id %}">{% blocktrans %}Order {{ order.id }}{% endblocktrans %}</a>
  &rsaquo; {% trans "Detail" %}
</div>
{% endblock %}

{% block content %}
<div class="module">
  <h1>{% blocktrans %}Order {{ order.id }}{% endblocktrans %}</h1>
  <ul class="object-tools">
    <li>
      <a href="#" onclick="window.print();">
        {% trans "Print order" %}
      </a>
    </li>
  </ul>


  <table>
    <tr>
      <th>{% trans "Created" %}</th>
      <td>{{ order.created }}</td>
    </tr>
    <tr>
      <th>{% trans "Customer" %}</th>
      <td>{{ order.shipping_address.recipient_name }}</td>
    </tr>
    <tr>
      <th>{% trans "Phone" %}</th>
      <td>{{ order.shipping_address.recipient_phone }}</td>
    </tr>
    <tr>
      <th>{% trans "E-mail" %}</th>
      <td><a href="mailto:{{ order.shipping_address.user.email }}">{{ order.shipping_address.user.email }}</a></td>
    </tr>
    <tr>
      <th>{% trans "Address" %}</th>
      <td>
        {{ order.shipping_address.address_line }},
        {{ order.shipping_address.address_line2 }} {{ order.shipping_address.town_city }},
        {{ order.shipping_address.postcode }},
        {{ order.shipping_address.country }}
      </td>
    </tr>

    <tr>
      <th>{% trans "Delivery Instructions" %}</th>
      <td>{{ order.shipping_address.delivery_instructions }}</td>
    </tr>
    <tr>
      <th>{% trans "Total amount" %}</th>
      <td>${{ order.total_paid }}</td>
    </tr>
    <tr>
      <th>{% trans "Status" %}</th>
      <td>{% if order.billing_status %}{% trans "Paid" %}{% else %}{% trans "Pending payment" %}{% endif %}</td>
    </tr>
    <tr>
      <th>{% trans "Payment option" %}</th>
      <td>{{ order.payment_option }}</td>
    </tr>
    <tr>
      <th>{% trans "Order key" %}</th>
      <td>
        {{ order.order_key }}
      </td>
    </tr>
  </table>
</div>
<div class="module">
  <h2>{% trans "Items bought" %}</h2>
  <table style="width:100%">
    <thead>
      <tr>
        <th>{% trans "Product" %}</th>
        <th>{% trans "Price" %}</th>
        <th>{% trans "Quantity" %}</th>
        <th>{% trans "Total" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for item in order.items.all %}
      <tr class="row{% cycle "1" "2" %}">
        <td>{{ item.product.name }}</td>
        <td class="num">${{ item.price }}</td>
        <td class="num">{{ item.quantity }}</td>
        <td class="num">${{ item.get_cost }}</td>
      </tr>
      {% endfor %}
      <tr class="total">
        <td colspan="3">{% trans "Total" %}</td>
        <td class="num">${{ order.get_total_cost }}</td>
      </tr>
    </tbody>
  </table>
</div>
{% endblock %}