{% extends "shop/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "User Orders" %}{% endblock %}

{% block content %}
<div class="col-11">
  <h1 class="h2">{% trans "User Orders" %}</h1>
</div>
<div class="col-11 justify-content-between">
  <div>{% trans "Manage your" %} <b>{% trans "orders" %}</b> {% trans "and personal details" %}
  </div>
</div>
<hr />

{% if orders %}
<div class="container">
  {% for order in orders %}
  <div class="row g-3">
    <div class="col-12 bg-light p-3 d-flex justify-content-between align-items-center">
      <div class="d-flex">
        <div class="pe-3">{% trans "Date" %}: {{ order.created }}</div>

      </div>
      <div class="d-flex align-items-center">

        <div class="text-end me-3">
          {% trans "Total paid" %}: <span class="fw-bold">Â£{{ order.total_paid }}</span>
        </div>

      </div>
    </div>
    <div class="col-md-7 col-lg-12 p-0">
      {% for item in order.items.all %}
      <div class="card mb-0 border-1">
        <div class="row g-0 align-items-center">
          <div class="col-md-12">
            <div class="card-body ml-4 p-1 d-flex justify-content-between align-items-center">
              <a class="text-decoration-none" href="{{ item.product.get_absolute_url }}">
                <p class="card-text small d-flex align-items-center" style="position: relative; color: blue;">
                  <img
                    src="{% if item.product.media_product.exists %}{{ item.product.media_product.first.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}"
                    alt="" style="width: 50px; margin-right: 10px;">
                  {% trans "Product" %}: {{item.product|title}} - {% trans "Price" %}: $ {{ item.price }} -
                  {% trans "Quantity" %}: {{ item.quantity }}
                </p>
              </a>


            </div>
          </div>
        </div>
      </div>
      {% endfor %}
      <div class="col-12 bg-light p-3 d-flex justify-content-end mb-5">
        <button class="btn btn-warning me-2" type="button">{% trans "Problem with order" %}</button>
        <button class="btn btn-light" type="button">{% trans "Leave a review" %}</button>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="col-11">
  <p>{% trans "You have no registered orders" %}</p>
</div>
{% endif %}
{% endblock %}